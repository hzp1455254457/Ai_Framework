# 技术栈版本锁定文件

## 📋 文档说明

本文档记录AI框架项目使用的所有技术栈和依赖库的版本信息。**这是技术栈版本的唯一真相源**，所有其他文档应引用本文档。

**更新规则**：
- 任何技术栈版本变更必须更新本文档
- 更新时必须记录变更日期和变更原因
- 必须同步更新 `requirements.txt` 和 `pyproject.toml`

---

## 🔧 核心框架版本

### Python
- **版本要求**：`3.10+`
- **推荐版本**：`3.11+` 或 `3.12+`
- **最低版本**：`3.10.0`
- **最后更新**：2026-01-21
- **更新原因**：初始版本定义
- **说明**：使用现代Python特性（类型注解、asyncio等）

### asyncio
- **版本**：Python标准库（3.10+）
- **说明**：异步IO支持，无需单独安装

---

## 🌐 Web框架

### FastAPI
- **版本**：`最新稳定版`
- **当前版本**：待确定（启动项目时确定）
- **最低版本**：`0.104.0+`
- **最后更新**：2026-01-21
- **更新原因**：初始版本定义
- **说明**：
  - 现代、快速的API框架
  - 自动API文档生成
  - 异步支持
  - 类型验证

---

## 📦 核心依赖库

### pydantic
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **最低版本**：`2.0.0+`
- **最后更新**：2026-01-21
- **更新原因**：初始版本定义
- **说明**：
  - 数据验证和配置管理
  - 支持Python 3.10+的类型注解

### httpx
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **最低版本**：`0.24.0+`
- **最后更新**：2026-01-21
- **更新原因**：初始版本定义
- **说明**：
  - 异步HTTP客户端
  - 用于调用AI服务API

### aiofiles
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **最低版本**：`23.0.0+`
- **最后更新**：2026-01-21
- **更新原因**：初始版本定义
- **说明**：
  - 异步文件操作
  - 支持异步文件读写

### python-dotenv
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **最低版本**：`1.0.0+`
- **最后更新**：2026-01-21
- **更新原因**：初始版本定义
- **说明**：
  - 环境变量管理
  - 从.env文件加载配置

### loguru
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **最低版本**：`0.7.0+`
- **最后更新**：2026-01-21
- **更新原因**：初始版本定义
- **说明**：
  - 结构化日志管理
  - 支持日志轮转和归档

### tenacity
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **最低版本**：`8.2.0+`
- **最后更新**：2026-01-21
- **更新原因**：初始版本定义
- **说明**：
  - 重试机制库
  - 支持多种重试策略

---

## 🗄️ 数据库

### SQLite
- **版本**：Python标准库（3.10+）
- **说明**：默认轻量级数据库，无需单独安装

### PostgreSQL（可选）
- **版本**：生产环境使用时确定
- **Python驱动**：`asyncpg` 或 `psycopg2`
- **说明**：生产环境可选数据库

### 向量数据库
- **Chroma** 或 **SQLite-VSS**
- **版本**：待确定具体需求时选择
- **说明**：用于Agent记忆存储

---

## 🎨 前端框架（可选）

### Streamlit（推荐）
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **最低版本**：`1.28.0+`
- **最后更新**：2026-01-21
- **说明**：快速构建Web UI，适合新手

### Gradio（可选）
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **说明**：简单易用的界面框架

### React + Vite（可选）
- **版本**：待确定（如需要复杂UI时）
- **说明**：如需要更复杂的UI时使用

---

## 🧪 开发工具

### pytest
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **最低版本**：`7.4.0+`
- **说明**：测试框架

### black
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **最低版本**：`23.0.0+`
- **说明**：代码格式化工具

### mypy
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **最低版本**：`1.5.0+`
- **说明**：类型检查工具

### pytest-asyncio
- **版本**：`最新稳定版`
- **当前版本**：待确定
- **最低版本**：`0.21.0+`
- **说明**：pytest的异步支持

---

## 📝 版本管理规则

### 版本更新流程

1. **评估更新必要性**
   - 新版本是否修复了关键安全漏洞？
   - 新版本是否包含需要的功能？
   - 是否有破坏性变更？

2. **更新版本**
   - 更新本文档（记录版本号和更新原因）
   - 更新 `requirements.txt` 或 `pyproject.toml`
   - 更新 `.env.example`（如涉及环境变量变更）

3. **测试验证**
   - 运行所有测试确保兼容性
   - 检查是否有破坏性变更影响
   - 验证新功能是否正常工作

4. **文档更新**
   - 更新 `CHANGELOG.md`
   - 更新相关技术文档
   - 更新示例代码（如需要）

### 版本锁定策略

- **生产依赖**：使用精确版本或最小版本范围
  - 示例：`fastapi>=0.104.0,<1.0.0`
  
- **开发依赖**：可以使用更灵活的版本范围
  - 示例：`pytest>=7.4.0`

- **定期审查**：每季度审查一次依赖版本，评估是否需要更新

---

## 🔄 版本更新历史

| 日期 | 组件 | 旧版本 | 新版本 | 更新原因 | 更新人 |
|------|------|--------|--------|---------|--------|
| 2026-01-21 | 初始版本 | - | - | 创建技术栈版本锁定文档 | - |

---

## 📚 相关文档

- [架构方案文档](../../AI框架架构方案文档.md)
- [依赖管理规则](../.cursor/rules/ProjectRules.mdc)
- [CHANGELOG](../../CHANGELOG.md)

---

## ⚠️ 重要提示

1. **单一真相源**：本文档是技术栈版本的唯一权威来源
2. **同步更新**：任何版本变更必须同步更新 `requirements.txt` 和相关文档
3. **测试验证**：版本更新后必须进行充分测试
4. **记录历史**：所有版本变更必须记录到版本更新历史表中
